## 微服务

### 您对微服务有何了解？

#### 微服务，又称微服务架构，是一种架构⻛格，它将应用程序构建为以业务领域为模型的小型自治服务集合。通俗地

#### 说，你必须看到蜜蜂如何通过对⻬六⻆形蜡细胞来构建它们的蜂窝状物。他们最初从使用各种材料的小部分开始，

#### 并继续从中构建一个大型蜂箱。这些细胞形成图案，产生坚固的结构，将蜂窝的特定部分固定在一起。这里，每个

#### 细胞独立于另一个细胞，但它也与其他细胞相关。这意味着对一个细胞的损害不会损害其他细胞，因此，蜜蜂可以

#### 在不影响完整蜂箱的情况下重建这些细胞。

#### 图 1 ：微服务的蜂窝表示–微服务访谈问题


#### 优势 说明

#### 独立开发

#### 所有微服务

#### 都可以根据

#### 各自的功能

#### 轻松开发

#### 独立部署根据他们所提供的服务，可以在任何应用中单独部署故障隔离即使应用中的一个服

#### 务不起作用，系统仍然继续运行混合技术栈可以用不同的语言和技术来构建同一应用程序的

#### 不同服务粒度缩放各个组件可根据需要进行扩展，无需将所有组件融合到一起

#### 请参考上图。这里，每个六边形形状代表单独的服务组件。与蜜蜂的工作类似，每个敏捷团队都使用可用的框架和

#### 所选的技术堆栈构建单独的服务组件。就像在蜂箱中一样，每个服务组件形成一个强大的微服务架构，以提供更好

#### 的可扩展性。此外，敏捷团队可以单独处理每个服务组件的问题，而对整个应用程序没有影响或影响最小。

### 说说微服务架构的优势

### 微服务有哪些特点？

#### 解耦—系统内的服务很大程度上是分离的。因此，整个应用程序可以轻松构建，更改和扩展

#### 组件化—微服务被视为可以轻松更换和升级的独立组件

#### 业务能力—微服务非常简单，专注于单一功能

#### 自治—开发人员和团队可以彼此独立工作，从而提高速度

#### 持续交付—通过软件创建，测试和批准的系统自动化，允许频繁发布软件

#### 责任—微服务不关注应用程序作为项目。相反，他们将应用程序视为他们负责的产品

#### 分散治理—重点是使用正确的工具来做正确的工作。这意味着没有标准化模式或任何技术模式。开发人员可以

#### 自由选择最有用的工具来解决他们的问题

#### 敏捷—微服务支持敏捷开发。任何新功能都可以快速开发并再次丢弃

### 微服务架构是什么样子的?

#### 通常传统的项目体积庞大，需求、设计、开发、测试、部署流程固定。新功能需要在原项目上做修改。

#### 但是微服务可以看做是对大项目的拆分，是在快速迭代更新上线的需求下产生的。新的功能模块会发布成新的服务

组件，与其他已发布的服务组件一同协作。 服务内部有多个生产者和消费者，通常以http rest的方式调用，服务总
体以一个（或几个）服务的形式呈现给客户使用。

微服务架构是一种思想对微服务架构我们没有一个明确的定义，但简单来说微服务架构是：

采用一组服务的方式来构建一个应用，服务独立部署在不同的进程中，不同服务通过一些轻量级交互机制来通信，
例如 RPC、HTTP 等，服务可独立扩展伸缩，每个服务定义了明确的边界，不同的服务甚至可以采用不同的编程语
言来实现，由独立的团队来维护。


Golang的微服务框架kit中有详细的微服务的例子,可以参考学习.

微服务架构设计包括：

1. 服务熔断降级限流机制 熔断降级的概念(Rate Limiter 限流器,Circuit breaker 断路器).
2. 框架调用方式解耦方式 Kit 或 Istio 或 Micro 服务发现(consul zookeeper kubeneters etcd ) RPC调用框架.
3. 链路监控,zipkin和prometheus.
4. 多级缓存.
5. 网关 (kong gateway).
6. Docker部署管理 Kubenetters.
7. 自动集成部署 CI/CD 实践.
8. 自动扩容机制规则.
9. 压测 优化.
10. Trasport 数据传输(序列化和反序列化).
11. Logging 日志.
12. Metrics 指针对每个请求信息的仪表盘化.

微服务架构介绍详细的可以参考:

```
Microservice Architectures
```
### 微服务架构如何运作？

#### 微服务架构具有以下组件：

#### 客户端–来自不同设备的不同用户发送请求。

#### 身份提供商–验证用户或客户身份并颁发安全令牌。

#### API 网关–处理客户端请求。

#### 静态内容–容纳系统的所有内容。

#### 管理–在节点上平衡服务并识别故障。

#### 服务发现–查找微服务之间通信路径的指南。

#### 内容交付网络–代理服务器及其数据中心的分布式网络。

#### 远程服务–启用驻留在 IT 设备网络上的远程访问信息。

### 微服务架构的优缺点是什么？

#### 微服务架构的优点微服务架构的缺点自由使用不同的技术增加故障排除挑战每个微服务都侧重于单一功能由于远程

#### 呼叫而增加延迟支持单个可部署单元增加了配置和其他操作的工作量允许经常发布软件难以保持交易安全确保每项

#### 服务的安全性艰难地跨越各种便捷跟踪数据多个服务是并行开发和部署的难以在服务之间进行编码

### 单片，SOA 和微服务架构有什么区别？


#### 单片 SOA 和微服务之间的比较–微服务访谈问题

#### 单片架构类似于大容器，其中应用程序的所有软件组件组装在一起并紧密封装。

#### 一个面向服务的架构是一种相互通信服务的集合。通信可以涉及简单的数据传递，也可以涉及两个或多个协调

#### 某些活动的服务。

#### 微服务架构是一种架构⻛格，它将应用程序构建为以业务域为模型的小型自治服务集合。

### 怎么做弹性扩缩容，原理是什么?

弹性伸缩（Auto Scaling）根据您的业务需求和伸缩策略，为您自动调整计算资源。您可设置定时、周期或监控策
略，恰到好处地增加或减少CVM实例，并完成实例配置，保证业务平稳健康运行。在需求高峰期时，弹性伸缩自动
增加CVM实例的数量，以保证性能不受影响；当需求较低时，则会减少CVM实例数量以降低成本。弹性伸缩既适合
需求稳定的应用程序，同时也适合每天、每周、每月使用量不停波动的应用程序。

### 说一下中间件原理.

中间件（middleware）是基础软件的一大类，属于可复用软件的范畴。中间件处于操作系统软件与用户的应用软
件的中间。中间件在操作系统、网络和数据库之上，应用软件的下层，总的作用是为处于自己上层的应用软件提供
运行与开发的环境，帮助用户灵活、高效地开发和集成复杂的应用软件 IDC的定义是：中间件是一种独立的系统软
件或服务程序，分布式应用软件借助这种软件在不同的技术之间共享资源，中间件位于客户机服务器的操作系统之
上，管理计算资源和网络通信。

中间件解决的问题是：

在中间件产生以前，应用软件直接使用操作系统、网络协议和数据库等开发，这些都是计算机最底层的东⻄，越底
层越复杂，开发者不得不面临许多很棘手的问题，如操作系统的多样性，繁杂的网络程序设计、管理，复杂多变的
网络环境，数据分散处理带来的不一致性问题、性能和效率、安全，等等。这些与用户的业务没有直接关系，但又
必须解决，耗费了大量有限的时间和精力。于是，有人提出能不能将应用软件所要面临的共性问题进行提炼、抽
象，在操作系统之上再形成一个可复用的部分，供成千上万的应用软件重复使用。这一技术思想最终构成了中间件
这类的软件。中间件屏蔽了底层操作系统的复杂性，使程序开发人员面对一个简单而统一的开发环境，减少程序设


#### 计的复杂性，将注意力集中在自己的业务上，不必再为程序在不同系统软件上的移植而重复工作，从而大大减少了

#### 技术上的负担。

### 在使用微服务架构时，您面临哪些挑战？

#### 开发一些较小的微服务听起来很容易，但开发它们时经常遇到的挑战如下。

```
自动化组件：难以自动化，因为有许多较小的组件。因此，对于每个组件，我们必须遵循 Build，Deploy 和
Monitor 的各个阶段。
易感性：将大量组件维护在一起变得难以部署，维护，监控和识别问题。它需要在所有组件周围具有很好的感
知能力。
配置管理：有时在各种环境中维护组件的配置变得困难。
调试：很难找到错误的每一项服务。维护集中式日志记录和仪表板以调试问题至关重要。
```
### SOA 和微服务架构之间的主要区别是什么？

#### SOA 和微服务之间的主要区别如下：

#### SOA 微服务

#### 遵循“尽可能多的共享”架构方法遵循“尽可能少分享”架构方法重要性在于“业务功能”重用重要性在于“有界背景”的概

#### 念它们有共同的治理和标准它们专注于人们的合作和其他选择的自由使用企业服务总线（ESB）进行通信简单的消

#### 息系统

#### 它们支持多种消息协议它们使用轻量级协议，如 HTTP/REST 等

单线程，通常使用 Event Loop 功能进行非多线程，有跟多的开销来处理 I/O

锁定 I/O 处理

最大化应用程序服务可重用性专注于解耦

传统的关系数据库更常用现代关系数据库更常用

系统的变化需要修改整体系统的变化是创造一种新的服务

DevOps/Continuous Delivery 正在变得流

专注于 DevOps/持续交付行，但还不是主流

### 微服务有什么特点？

#### 您可以列出微服务的特征，如下所示：


#### 图 7 ：微服务的特征–微服务访谈问题

### 什么是领域驱动设计？

#### 图 8 ： DDD 原理–微服务面试问题

### 为什么需要域驱动设计（DDD）？

#### 图 9 ：我们需要 DDD 的因素–微服务面试问题


### 什么是无所不在的语言？

#### 如果您必须定义泛在语言（UL），那么它是特定域的开发人员和用户使用的通用语言，通过该语言可以轻松解释

#### 域。无处不在的语言必须非常清晰，以便它将所有团队成员放在同一⻚面上，并以机器可以理解的方式进行翻译。

### 什么是凝聚力？

#### 模块内部元素所属的程度被认为是凝聚力。

### 什么是耦合？

#### 组件之间依赖关系强度的度量被认为是耦合。一个好的设计总是被认为具有高内聚力和低耦合性。

### 什么是 REST / RESTful 以及它的用途是什么？

Representational State Transfer（REST）/ RESTful Web 服务是一种帮助计算机系统通过 Internet 进行通信的架
构⻛格。这使得微服务更容易理解和实现。

微服务可以使用或不使用 RESTful API 实现，但使用 RESTful API 构建松散耦合的微服务总是更容易。

### 什么是不同类型的微服务测试？

#### 在使用微服务时，由于有多个微服务协同工作，测试变得非常复杂。因此，测试分为不同的级别。

#### 在底层，我们有面向技术的测试，如单元测试和性能测试。这些是完全自动化的。

#### 在中间层面，我们进行了诸如压力测试和可用性测试之类的探索性测试。

#### 在顶层，我们的验收测试数量很少。这些验收测试有助于利益相关者理解和验证软件功能。